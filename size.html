<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description"
          content="Делайте виртуальную примерку предметов интерьера с помощью камеры на вашем телефоне. Дополненная реальность поможет вам точно понять сколько места в пространстве займет та или иная вещь.">
    <link rel="stylesheet" href="style.css">
    <title>Примерка Мебели Виртуально</title>
</head>
<body>
<div class="root">
    <div class="size_container">
        <div class="size_control">
            <div class="size_header">Введите размеры</div>
            <div class="size_image">
                <img class="image">
            </div>
            <div class="size_input_list">
                <div class="input_item">
                    <label for="width">Ширина:</label>
                    <input id="width" type="number" inputmode="decimal"><span>см</span>
                </div>
                <div class="input_item">
                    <label for="height">Высота:</label>
                    <input id="height" type="number" inputmode="decimal"><span>см</span>
                </div>
                <div class="input_item">
                    <label for="depth">Глубина:</label>
                    <input id="depth" type="number" inputmode="decimal"><span>см</span>
                </div>
            </div>
        </div>

        <a id="ar-link-size" class="size_ar_link" rel="ar">
            <img class="size_ar_image">
        </a>
    </div>
    <div class="loader_container hidden">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div class="loader_text">Загрузка тестовой модели</div>
        <div class="loader_subtext">Это может занять несколько минут...</div>
    </div>
</div>
<script>
    if (/Android|webOS|BlackBerry|BB|PlayBook|IEMobile|Windows Phone/i.test(navigator.userAgent)) {
        window.location.href = 'https://checkitsmart.com/android.html'
    } else {
        const item = JSON.parse(localStorage.getItem('item'));
        const img = document.querySelector('.image');
        img.setAttribute('src', item.figure);

        const sizes = document.querySelectorAll('input[type=number]');
        sizes.forEach(input => {
            const id = input.getAttribute('id');
            (id === 'width') ?
                input.value = item.sizes.w :
                (id === 'height') ?
                    input.value = item.sizes.h :
                    input.value = item.sizes.d
        });

        const handleClick = () => {
            const loaderContainer = document.querySelector('.loader_container');
            const sizeContainer = document.querySelector('.size_container');

            sizeContainer.classList.add('hidden');
            loaderContainer.classList.remove('hidden');
            setTimeout(() => {
                sizeContainer.classList.remove('hidden');
                loaderContainer.classList.add('hidden');
            }, 1000);
        }

        const getItemSize = (item) => {
            const linkModel = document.querySelector('.size_ar_link');
            const img = document.querySelector('.size_ar_image');

            img.src = './assets/images/other/base.svg';
            linkModel.href = item.linkSize;

            linkModel.addEventListener('click', handleClick);
        }
        getItemSize(item);
    }
</script>
</body>
</html>