<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description"
          content="Делайте виртуальную примерку предметов интерьера с помощью камеры на вашем телефоне. Дополненная реальность поможет вам точно понять сколько места в пространстве займет та или иная вещь.">
    <link rel="stylesheet" href="style.css">
    <title>Примерка Мебели Виртуально</title>
</head>
<body>
<div class="root">
    <div class="size_container">
        <div class="size_control">
            <div class="size_header">Введите габаритные размеры</div>
            <div class="size_image">
                <img class="image">
            </div>
            <div class="size_input_list">
                <div class="input_item">
                    <label for="width">Ширина:</label>
                    <input id="width" type="number" inputmode="decimal" value="80"><span>см</span>
                </div>
                <div class="input_item">
                    <label for="height">Высота:</label>
                    <input id="height" type="number" inputmode="decimal" value="77"><span>см</span>
                </div>
                <div class="input_item">
                    <label for="depth">Глубина:</label>
                    <input id="depth" type="number" inputmode="decimal" value="80"><span>см</span>
                </div>
            </div>
        </div>
        <div class="size_ar_button">
        </div>
    </div>
    <div class="loader_container hidden">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div class="loader_text">Загрузка тестовой модели</div>
        <div class="loader_subtext">Это может занять несколько минут...</div>
    </div>
</div>
<script>
    const item = JSON.parse(localStorage.getItem('item'));
    const img = document.querySelector('.image');
    img.setAttribute('src', item.figure);

    const handleClick = () => {
        const loaderContainer = document.querySelector('.loader_container');
        const sizeContainer = document.querySelector('.size_container');

        sizeContainer.classList.add('hidden');
        loaderContainer.classList.remove('hidden');
        setTimeout(() => {
            sizeContainer.classList.remove('hidden');
            loaderContainer.classList.add('hidden');
            window.location = item.linkSize;
        }, 3000);
    }

    const getItemSize = (item) => {
        const linkModel = document.createElement('a');
        const img = document.createElement('img');
        img.src = './assets/images/other/baseAR.svg';


        linkModel.href = item.linkSize;
        linkModel.classList.add('size_ar_link');
        linkModel.setAttribute('rel', 'ar');
        linkModel.setAttribute('id', 'ar-link-size');
        linkModel.append(img);
        linkModel.addEventListener('click', handleClick);

        document.querySelector('.size_ar_button').append(linkModel)
    }
    getItemSize(item);
</script>
</body>
</html>