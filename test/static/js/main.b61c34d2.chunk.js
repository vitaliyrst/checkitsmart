(this.webpackJsonpwebxr=this.webpackJsonpwebxr||[]).push([[0],{24:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var i,o,r,c=n(8),a=n.n(c),s=n(15),d=n.n(s),u=n(12),l=(n(24),n(5)),b=n(16),m=n(18),f=n(17),p=n(19),w=n(6),j=function(e){return Object(w.jsx)("button",{type:"button",onClick:function(){return e.onSelect(e.name)},children:e.name})},h=new l.i(16777215,12303359,1),v=new l.z,x=new l.s(75,window.innerWidth/window.innerHeight,.01,600),O=new l.D({antialias:!0,alpha:!0}),g=null,S=!1,E=(new l.B,new l.w,function(e){var t=Object(c.useRef)();Object(c.useEffect)((function(){v.add(x),v.add(h),O.setPixelRatio(window.devicePixelRatio),O.setSize(window.innerWidth,window.innerHeight),O.outputEncoding=l.E,O.xr.enabled=!0,t.current.append(O.domElement),t.current.append(b.a.createButton(O,{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"],domOverlay:{root:t.current}}))}),[]),Object(c.useEffect)((function(){return n(),function(){v.remove(i)}}),[e.model]);var n=function(){var t=new f.a,n=new m.a;t.setPath(e.path).load(e.model.mtl,(function(t){t.preload(),n.setMaterials(t),n.setPath(e.path),n.load(e.model.obj,(function(e){a(i=e),s(),O.setAnimationLoop(E)}))}))},a=function(){(o=new l.p(new l.y(.05,.07,32).rotateX(-Math.PI/2),new l.r)).matrixAutoUpdate=!1,o.visible=!1,v.add(o)},s=function(){O.xr.getController(0).addEventListener("select",d),window.addEventListener("resize",u)},d=function(){if(o.visible){i.position.setFromMatrixPosition(o.matrix);var e=i.position.y;(r=new p.a([i],x,O.domElement)).transformGroup=!0,v.remove(o),v.add(i),r.addEventListener("drag",(function(){i.position.y=e}))}},u=function(){x.aspect=window.innerWidth/window.innerHeight,x.updateProjectionMatrix(),O.setSize(window.innerWidth,window.innerHeight)},E=function(e,t){if(t){var n=O.xr.getReferenceSpace(),i=O.xr.getSession();if(!1===S&&(i.requestReferenceSpace("viewer").then((function(e){i.requestHitTestSource({space:e}).then((function(e){g=e}))})),i.addEventListener("end",(function(){S=!1,g=null})),S=!0),g){var r=t.getHitTestResults(g);if(r.length){var c=r[0];o.visible=!0,o.matrix.fromArray(c.getPose(n).transform.matrix)}else o.visible=!1}}O.render(v,x)};return Object(w.jsx)("div",{className:"canvas_container",ref:t,children:Object(w.jsxs)("div",{className:"buttons",children:[Object(w.jsx)("button",{type:"button",id:"place-button",onClick:function(){return i.position.z+=.01},children:"Near"}),Object(w.jsx)("button",{type:"button",id:"place-button",onClick:function(){return i.position.z+=-.01},children:"Far"}),e.colors.map((function(t){return Object(w.jsx)(j,{name:t,onSelect:e.onSelectModel},t)}))]})})}),y=function(e){var t=Object(c.useState)({obj:e.item.obj,mtl:e.item.mtl}),n=Object(u.a)(t,2),i=n[0],o=n[1];return Object(w.jsx)("div",{children:Object(w.jsx)(E,{model:i,path:e.item.path,colors:e.item.colors,onSelectModel:function(e){o({obj:"".concat(e,".obj"),mtl:"".concat(e,".mtl")})}})})};var P=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(y,{item:{path:"./assets/models/test4/",obj:"box1meter.obj",mtl:"box1meter.mtl",colors:[]}})})};d.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(P,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.b61c34d2.chunk.js.map